<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <title>Reports - China GAC Trade Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/shared.css">
    <style>
        .report-templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        .template-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .template-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--primary-light));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .template-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 188, 212, 0.15);
        }
        .template-card:hover::before { opacity: 1; }
        .template-card.selected {
            border-color: var(--accent);
            background: rgba(0, 188, 212, 0.05);
        }
        .template-card.selected::before { opacity: 1; }
        .template-icon {
            width: 48px;
            height: 48px;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 16px;
        }
        .template-card h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .template-card p {
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.5;
        }
        .config-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .config-panel h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        .config-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s ease;
        }
        .checkbox-item:hover { border-color: var(--accent); }
        .checkbox-item.checked {
            background: rgba(0, 188, 212, 0.15);
            border-color: var(--accent);
        }
        .checkbox-item input { display: none; }
        .preview-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            min-height: 400px;
        }
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        .preview-content {
            padding: 20px;
            background: var(--bg-input);
            border-radius: 12px;
            min-height: 300px;
        }
        .preview-placeholder {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        .preview-placeholder .icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        .history-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.2s ease;
        }
        .history-item:hover {
            border-color: var(--accent);
            background: var(--bg-card-hover);
        }
        .history-icon {
            width: 40px;
            height: 40px;
            background: rgba(0, 188, 212, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-right: 16px;
        }
        .history-info { flex: 1; }
        .history-info h5 { font-size: 14px; margin-bottom: 4px; }
        .history-info p { font-size: 12px; color: var(--text-muted); }
        .history-actions { display: flex; gap: 8px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <img id="header-logo" src="assets/logo-dark.svg" alt="China GAC Trade Dashboard">
            </a>
            <div class="header-right">
                <div class="nav-links">
                    <a href="index.html">Overview</a>
                    <a href="dashboard.html">Full Dashboard</a>
                    <a href="countries.html">Countries</a>
                    <a href="commodities.html">Commodities</a>
                    <a href="reports.html" class="active">Reports</a>
                </div>
                <div class="theme-toggle" onclick="toggleTheme()">
                    <span class="theme-toggle-icon" id="theme-icon">üåô</span>
                    <span class="theme-toggle-label" id="theme-label">Dark</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">Home</a>
            <span>/</span>
            <span>Reports</span>
        </div>

        <h1 class="page-title">Report Generator</h1>
        <p class="page-subtitle">Create and export custom trade reports in PDF or Excel format</p>

        <h2 class="section-header">Report Templates</h2>
        <div class="report-templates" id="templates">
            <div class="template-card" onclick="selectTemplate('monthly')" data-template="monthly">
                <div class="template-icon">üìä</div>
                <h4>Monthly Summary</h4>
                <p>Overview of trade statistics for a specific month, including KPIs, top partners, and trends.</p>
            </div>
            <div class="template-card" onclick="selectTemplate('country')" data-template="country">
                <div class="template-icon">üåç</div>
                <h4>Country Profile</h4>
                <p>Detailed analysis of bilateral trade with a specific country or region.</p>
            </div>
            <div class="template-card" onclick="selectTemplate('regional')" data-template="regional">
                <div class="template-icon">üó∫Ô∏è</div>
                <h4>Regional Analysis</h4>
                <p>Comprehensive comparison of trade across different geographic regions.</p>
            </div>
            <div class="template-card" onclick="selectTemplate('commodity')" data-template="commodity">
                <div class="template-icon">üì¶</div>
                <h4>Commodity Report</h4>
                <p>Breakdown of trade by HS code categories and product classifications.</p>
            </div>
            <div class="template-card" onclick="selectTemplate('yoy')" data-template="yoy">
                <div class="template-icon">üìà</div>
                <h4>YoY Comparison</h4>
                <p>Year-over-year analysis showing growth trends and changes over time.</p>
            </div>
            <div class="template-card" onclick="selectTemplate('custom')" data-template="custom">
                <div class="template-icon">‚öôÔ∏è</div>
                <h4>Custom Report</h4>
                <p>Build your own report by selecting specific metrics, filters, and visualizations.</p>
            </div>
        </div>

        <div class="config-panel" id="config-panel" style="display: none;">
            <h3>Report Configuration</h3>
            <div class="config-row">
                <div class="filter-group">
                    <label>Time Period</label>
                    <select id="config-period">
                        <option value="2025-10">October 2025</option>
                        <option value="2025-09">September 2025</option>
                        <option value="2025-08">August 2025</option>
                        <option value="2025-Q3">Q3 2025</option>
                        <option value="2025">Full Year 2025</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Region Filter</label>
                    <select id="config-region">
                        <option value="all">All Regions</option>
                        <option value="Asia">Asia</option>
                        <option value="Europe">Europe</option>
                        <option value="North America">North America</option>
                        <option value="Latin America">Latin America</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Output Format</label>
                    <select id="config-format">
                        <option value="pdf">PDF Document</option>
                        <option value="xlsx">Excel Spreadsheet</option>
                        <option value="csv">CSV Data</option>
                    </select>
                </div>
            </div>
            <div class="filter-group">
                <label>Include Sections</label>
                <div class="checkbox-group" id="sections-checkboxes">
                    <label class="checkbox-item checked" onclick="toggleCheckbox(this)">
                        <input type="checkbox" checked> Summary KPIs
                    </label>
                    <label class="checkbox-item checked" onclick="toggleCheckbox(this)">
                        <input type="checkbox" checked> Top Partners
                    </label>
                    <label class="checkbox-item checked" onclick="toggleCheckbox(this)">
                        <input type="checkbox" checked> Trend Charts
                    </label>
                    <label class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox"> Regional Breakdown
                    </label>
                    <label class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox"> Commodity Analysis
                    </label>
                    <label class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox"> YoY Comparison
                    </label>
                    <label class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox"> Data Tables
                    </label>
                </div>
            </div>
        </div>

        <div class="charts-grid" style="grid-template-columns: 1fr 350px;">
            <div class="preview-panel">
                <div class="preview-header">
                    <h3 style="font-size: 16px; font-weight: 600;">Report Preview</h3>
                    <div>
                        <button class="btn btn-secondary" onclick="refreshPreview()">Refresh</button>
                        <button class="btn btn-primary" onclick="generateReport()">Generate Report</button>
                    </div>
                </div>
                <div class="preview-content" id="preview-content">
                    <div class="preview-placeholder">
                        <div class="icon">üìã</div>
                        <h4>Select a Template</h4>
                        <p>Choose a report template above to see a preview</p>
                    </div>
                </div>
            </div>
            <div>
                <div class="config-panel">
                    <h3>Recent Reports</h3>
                    <div id="recent-reports">
                        <div class="history-item">
                            <div class="history-icon">üìä</div>
                            <div class="history-info">
                                <h5>Monthly Summary - Oct 2025</h5>
                                <p>Generated 2 hours ago</p>
                            </div>
                            <div class="history-actions">
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;">Download</button>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-icon">üåç</div>
                            <div class="history-info">
                                <h5>USA Country Profile</h5>
                                <p>Generated yesterday</p>
                            </div>
                            <div class="history-actions">
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;">Download</button>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-icon">üìà</div>
                            <div class="history-info">
                                <h5>YoY Analysis 2024-2025</h5>
                                <p>Generated 3 days ago</p>
                            </div>
                            <div class="history-actions">
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;">Download</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="config-panel">
                    <h3>Export Options</h3>
                    <p style="font-size: 13px; color: var(--text-muted); margin-bottom: 16px;">Choose how you want to receive your report</p>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px;" onclick="generateReport()">
                        üìÑ Download as PDF
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 8px;" onclick="generateReport()">
                        üìä Download as Excel
                    </button>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="generateReport()">
                        üìß Send via Email
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/shared.js"></script>
    <script>
        let selectedTemplate = null;

        const templatePreviews = {
            monthly: {
                title: 'Monthly Trade Summary - October 2025',
                content: `
                    <div style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Key Performance Indicators</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <div style="background: var(--bg-card); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color);">
                                <div style="font-size: 12px; color: var(--text-muted);">Total Trade</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--accent);">$532.8B</div>
                                <div style="font-size: 11px; color: var(--success);">‚ñ≤ +5.2% YoY</div>
                            </div>
                            <div style="background: var(--bg-card); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color);">
                                <div style="font-size: 12px; color: var(--text-muted);">Trade Balance</div>
                                <div style="font-size: 24px; font-weight: 700; color: var(--success);">$95.4B</div>
                                <div style="font-size: 11px; color: var(--text-muted);">Surplus</div>
                            </div>
                        </div>
                    </div>
                    <div style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Top 5 Partners</h4>
                        <table style="width: 100%; font-size: 12px;">
                            <tr style="background: var(--bg-card);"><td style="padding: 8px;">1. USA</td><td style="text-align: right; padding: 8px;">$58.7B</td></tr>
                            <tr><td style="padding: 8px;">2. Japan</td><td style="text-align: right; padding: 8px;">$28.4B</td></tr>
                            <tr style="background: var(--bg-card);"><td style="padding: 8px;">3. South Korea</td><td style="text-align: right; padding: 8px;">$27.6B</td></tr>
                            <tr><td style="padding: 8px;">4. Taiwan</td><td style="text-align: right; padding: 8px;">$24.3B</td></tr>
                            <tr style="background: var(--bg-card);"><td style="padding: 8px;">5. Germany</td><td style="text-align: right; padding: 8px;">$22.1B</td></tr>
                        </table>
                    </div>
                `
            },
            country: {
                title: 'Country Profile Report',
                content: `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 48px; margin-bottom: 12px;">üá∫üá∏</div>
                        <h3>United States</h3>
                        <p style="color: var(--text-muted); font-size: 13px;">Bilateral Trade Analysis</p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 20px;">
                        <div style="background: var(--bg-card); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color);">
                            <div style="font-size: 12px; color: var(--text-muted);">Export to China</div>
                            <div style="font-size: 20px; font-weight: 700; color: var(--success);">$44.8B</div>
                        </div>
                        <div style="background: var(--bg-card); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color);">
                            <div style="font-size: 12px; color: var(--text-muted);">Import from China</div>
                            <div style="font-size: 20px; font-weight: 700; color: var(--danger);">$13.9B</div>
                        </div>
                    </div>
                `
            },
            regional: {
                title: 'Regional Analysis Report',
                content: `
                    <h4 style="margin-bottom: 16px;">Trade Volume by Region</h4>
                    <div style="space-y: 8px;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="width: 80px; font-size: 12px;">Asia</div>
                            <div style="flex: 1; height: 20px; background: var(--bg-card); border-radius: 4px; overflow: hidden;">
                                <div style="width: 70%; height: 100%; background: #2196f3;"></div>
                            </div>
                            <div style="width: 60px; text-align: right; font-size: 12px;">$285.4B</div>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="width: 80px; font-size: 12px;">Europe</div>
                            <div style="flex: 1; height: 20px; background: var(--bg-card); border-radius: 4px; overflow: hidden;">
                                <div style="width: 30%; height: 100%; background: #4caf50;"></div>
                            </div>
                            <div style="width: 60px; text-align: right; font-size: 12px;">$98.6B</div>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="width: 80px; font-size: 12px;">N. America</div>
                            <div style="flex: 1; height: 20px; background: var(--bg-card); border-radius: 4px; overflow: hidden;">
                                <div style="width: 22%; height: 100%; background: #ff9800;"></div>
                            </div>
                            <div style="width: 60px; text-align: right; font-size: 12px;">$72.3B</div>
                        </div>
                    </div>
                `
            },
            commodity: {
                title: 'Commodity Breakdown Report',
                content: `
                    <h4 style="margin-bottom: 16px;">Top Export Commodities</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <div style="background: rgba(0, 200, 83, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid var(--success);">
                            <div style="font-size: 11px; color: var(--text-muted);">Machinery</div>
                            <div style="font-size: 16px; font-weight: 600;">$89.5B</div>
                        </div>
                        <div style="background: rgba(0, 200, 83, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid var(--success);">
                            <div style="font-size: 11px; color: var(--text-muted);">Electronics</div>
                            <div style="font-size: 16px; font-weight: 600;">$72.3B</div>
                        </div>
                        <div style="background: rgba(0, 200, 83, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid var(--success);">
                            <div style="font-size: 11px; color: var(--text-muted);">Textiles</div>
                            <div style="font-size: 16px; font-weight: 600;">$42.3B</div>
                        </div>
                        <div style="background: rgba(0, 200, 83, 0.1); padding: 12px; border-radius: 8px; border-left: 3px solid var(--success);">
                            <div style="font-size: 11px; color: var(--text-muted);">Chemicals</div>
                            <div style="font-size: 16px; font-weight: 600;">$35.8B</div>
                        </div>
                    </div>
                `
            },
            yoy: {
                title: 'Year-over-Year Comparison',
                content: `
                    <h4 style="margin-bottom: 16px;">Annual Trade Growth</h4>
                    <table style="width: 100%; font-size: 12px; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--bg-card);">
                                <th style="padding: 10px; text-align: left;">Year</th>
                                <th style="padding: 10px; text-align: right;">Total</th>
                                <th style="padding: 10px; text-align: right;">Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 10px;">2025 (YTD)</td><td style="text-align: right; padding: 10px;">$4,891B</td><td style="text-align: right; padding: 10px; color: var(--success);">+5.2%</td></tr>
                            <tr style="background: var(--bg-card);"><td style="padding: 10px;">2024</td><td style="text-align: right; padding: 10px;">$6,075B</td><td style="text-align: right; padding: 10px; color: var(--success);">+4.1%</td></tr>
                            <tr><td style="padding: 10px;">2023</td><td style="text-align: right; padding: 10px;">$5,937B</td><td style="text-align: right; padding: 10px; color: var(--danger);">-5.8%</td></tr>
                            <tr style="background: var(--bg-card);"><td style="padding: 10px;">2022</td><td style="text-align: right; padding: 10px;">$6,310B</td><td style="text-align: right; padding: 10px; color: var(--success);">+4.4%</td></tr>
                        </tbody>
                    </table>
                `
            },
            custom: {
                title: 'Custom Report Builder',
                content: `
                    <div style="text-align: center; padding: 40px 20px;">
                        <div style="font-size: 48px; margin-bottom: 16px;">‚öôÔ∏è</div>
                        <h4>Build Your Custom Report</h4>
                        <p style="color: var(--text-muted); font-size: 13px; margin-top: 8px;">
                            Use the configuration panel above to select the sections,<br>
                            time periods, and filters for your custom report.
                        </p>
                    </div>
                `
            }
        };

        function selectTemplate(template) {
            selectedTemplate = template;

            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.toggle('selected', card.dataset.template === template);
            });

            document.getElementById('config-panel').style.display = 'block';

            const preview = templatePreviews[template];
            if (preview) {
                document.getElementById('preview-content').innerHTML = `
                    <div style="padding: 20px; border-bottom: 1px solid var(--border-color); margin-bottom: 20px;">
                        <h3 style="font-size: 18px; font-weight: 600;">${preview.title}</h3>
                        <p style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Preview - Generated ${new Date().toLocaleDateString()}</p>
                    </div>
                    ${preview.content}
                `;
            }
        }

        function toggleCheckbox(el) {
            el.classList.toggle('checked');
            el.querySelector('input').checked = el.classList.contains('checked');
        }

        function refreshPreview() {
            if (selectedTemplate) {
                selectTemplate(selectedTemplate);
            }
        }

        function generateReport() {
            if (!selectedTemplate) {
                alert('Please select a report template first.');
                return;
            }

            const format = document.getElementById('config-format').value;
            const period = document.getElementById('config-period').value;

            alert(`Generating ${selectedTemplate} report for ${period} in ${format.toUpperCase()} format...\n\nThis is a demo. In production, this would generate and download the actual report.`);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const params = getUrlParams();
            if (params.type) {
                selectTemplate(params.type);
            }
            if (params.country) {
                selectTemplate('country');
            }
        });
    </script>
</body>
</html>
